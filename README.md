# Lute

> åƒå‘¼ä¸‡å”¤å§‹å‡ºæ¥ï¼ŒçŠ¹æŠ±çµç¶åŠé®é¢ã€‚è½¬è½´æ‹¨å¼¦ä¸‰ä¸¤å£°ï¼Œæœªæˆæ›²è°ƒå…ˆæœ‰æƒ…ã€‚

## ğŸ’¡ ç®€ä»‹

[Lute](https://github.com/b3log/lute) æ˜¯ä¸€æ¬¾ç»“æ„åŒ–çš„ Markdown å¼•æ“ï¼Œå®Œæ•´å®ç°äº†æœ€æ–°çš„ [GFM](https://github.github.com/gfm/) / [CommonMark](https://commonmark.org) è§„èŒƒï¼Œå¯¹ä¸­æ–‡è¯­å¢ƒæ”¯æŒæ›´å¥½ã€‚

## ğŸ“½ï¸ èƒŒæ™¯

ä¹‹å‰æˆ‘ä¸€ç›´åœ¨ä½¿ç”¨å…¶ä»– Markdown å¼•æ“ï¼Œä»–ä»¬æˆ–å¤šæˆ–å°‘éƒ½æœ‰äº›â€œç‘•ç–µâ€ï¼š

* å¯¹æ ‡å‡†è§„èŒƒçš„æ”¯æŒä¸ä¸€è‡´
* å¯¹â€œæ€ªå¼‚â€æ–‡æœ¬å¤„ç†éå¸¸è€—æ—¶ï¼Œç”šè‡³æŒ‚æ­»

Lute çš„ç›®æ ‡æ˜¯æ„å»ºä¸€ä¸ªç»“æ„åŒ–çš„ Markdown å¼•æ“ï¼Œå®ç° GFM/CommonMark è§„èŒƒã€‚æ‰€è°“çš„â€œç»“æ„åŒ–â€æŒ‡çš„æ˜¯ä»è¾“å…¥çš„ MD æ–‡æœ¬æ„å»ºæŠ½è±¡è¯­æ³•æ ‘ï¼Œé€šè¿‡æ“ä½œæ ‘æ¥è¿›è¡Œ HTML è¾“å‡ºã€åŸæ–‡æ ¼å¼åŒ–ç­‰ã€‚
æ”¯æŒ GFM/CM è§„èŒƒåˆ™æ˜¯ä¸ºäº†ä¿è¯ Markdown æ¸²æŸ“ä¸å­˜åœ¨äºŒä¹‰æ€§ï¼Œè®©åŒä¸€ä»½ Markdown æ–‡æœ¬å¯ä»¥åœ¨å®ç°è¿™ä¸¤ä¸ªè§„èŒƒçš„ Markdown å¼•æ“å¤„ç†åå¾—åˆ°ä¸€æ ·çš„ç»“æœï¼Œæˆ‘è§‰å¾—è¿™ä¸€ç‚¹éå¸¸é‡è¦ã€‚

å®ç°è§„èŒƒçš„å¼•æ“å¹¶ä¸å¤šï¼Œæˆ‘æƒ³è¯•è¯•çœ‹è‡ªå·±èƒ½ä¸èƒ½å†™ä¸Šä¸€ä¸ªï¼Œè¿™ä¹Ÿæ˜¯ Lute çš„åŠ¨æœºä¹‹ä¸€ã€‚å…³äºå¦‚ä½•å®ç°ä¸€ä¸ª Markdown å¼•æ“ï¼Œç½‘ä¸Šä¼—è¯´çº·çº­ï¼š

* æœ‰çš„äººè¯´ Markdown é€‚åˆç”¨æ­£åˆ™è§£æï¼Œå› ä¸ºæ–‡æ³•è§„åˆ™å¤ªç®€å•
* ä¹Ÿæœ‰çš„äººè¯´ Markdown å¯ä»¥ç”¨ç¼–è¯‘åŸç†æ¥å¤„ç†ï¼Œæ­£åˆ™å¤ªéš¾ç»´æŠ¤

æˆ‘èµåŒåè€…ï¼Œå› ä¸ºæ­£åˆ™ç¡®å®å¤ªéš¾ç»´æŠ¤è€Œä¸”è¿è¡Œæ•ˆç‡è¾ƒä½ã€‚æœ€é‡è¦çš„åŸå› æ˜¯ç¬¦åˆ GFM/CM è§„èŒƒçš„ Markdown å¼•æ“çš„æ ¸å¿ƒè§£æç®—æ³•ä¸å¤§å¯èƒ½ç”¨æ­£åˆ™å†™å‡ºæ¥ï¼Œå› ä¸ºè§„èŒƒå®šä¹‰çš„è§„åˆ™å®åœ¨æ˜¯å¤ªå¤æ‚äº†ã€‚

æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„åŠ¨æœºå°±æ˜¯ B3log å¼€æºç¤¾åŒºéœ€è¦ä¸€æ¬¾è‡ªå·±çš„ Markdown å¼•æ“ï¼š

* ç¤¾åŒºé¡¹ç›® [Solo](https://github.com/b3log/solo)ã€[Pipe](https://github.com/b3log/pipe)ã€[Sym](https://github.com/b3log/symphony) éœ€è¦æ•ˆæœç»Ÿä¸€çš„ Markdown æ¸²æŸ“ï¼Œå¹¶ä¸”æ€§èƒ½éå¸¸é‡è¦
* ç¤¾åŒºé¡¹ç›® [Vditor](https://github.com/b3log/vditor) éœ€è¦ä¸€æ¬¾ç»“æ„åŒ–çš„å¼•æ“ä½œä¸ºæ”¯æ’‘ï¼Œå®ç°ä¸‹ä¸€ä»£çš„ Markdown ç¼–è¾‘å™¨ï¼Œä¸ºæœªæ¥è€Œæ„å»º

## âœ¨  ç‰¹æ€§

* å®Œæ•´å®ç°æœ€æ–°ç‰ˆ GFM/CM è§„èŒƒ
* éå¸¸å¿«
* ä»£ç å—è¯­æ³•é«˜äº®ï¼ˆå¾…å®ç°ï¼‰
* æ›´å¥½åœ°æ”¯æŒä¸­æ–‡è¯­å¢ƒï¼ˆå¾…å®ç°ï¼‰
* æ”¯æŒåŸæ–‡æ ¼å¼åŒ–ï¼ˆå¾…å®ç°ï¼‰
* å¯æ‰©å±•è¯­æ³•æ ‘èŠ‚ç‚¹ï¼ˆå¾…å®ç°ï¼‰

## âš¡ æ€§èƒ½

åœ¨ç›¸åŒæœºå™¨ä¸Šï¼Œç”¨ç›¸åŒçš„æµ‹è¯•æ•°æ®ï¼ˆ[CommonMark è§„èŒƒæ–‡æ¡£](https://github.com/commonmark/commonmark-spec-web/blob/gh-pages/0.29/spec.txt) ~197Kï¼‰è·‘åŸºå‡†æµ‹è¯•ç»“æœå¦‚ä¸‹ã€‚
ç›®å‰çœ‹æ¥åœ¨å®ç° CommonMark è§„èŒƒçš„å‰æä¸‹ï¼ŒLuteã€goldmark å’Œ golang-commonmark çš„æ€§èƒ½å·®è·ä¸å¤§ã€‚

### [Lute](https://github.com/b3log/lute)

```
BenchmarkLute-2   	     300	   4458074 ns/op	 2767406 B/op	   22450 allocs/op
BenchmarkLute-4   	     300	   4428252 ns/op	 2767664 B/op	   22450 allocs/op
BenchmarkLute-8   	     300	   4591147 ns/op	 2768186 B/op	   22450 allocs/op
```

### [goldmark](https://github.com/yuin/goldmark)

```
BenchmarkGoldMark-2   	     300	   4757269 ns/op	 2110741 B/op	   13901 allocs/op
BenchmarkGoldMark-4   	     300	   4790514 ns/op	 2113679 B/op	   13902 allocs/op
BenchmarkGoldMark-8   	     300	   4860327 ns/op	 2114696 B/op	   13902 allocs/op
```

### [golang-commonmark](https://gitlab.com/golang-commonmark/markdown)

```
BenchmarkGolangCommonMark-2   	     300	   5099691 ns/op	 2973258 B/op	   18827 allocs/op
BenchmarkGolangCommonMark-4   	     300	   5083059 ns/op	 2973794 B/op	   18828 allocs/op
BenchmarkGolangCommonMark-8   	     300	   5103111 ns/op	 2974818 B/op	   18828 allocs/op
```

### [Blackfriday](https://github.com/russross/blackfriday)

```
BenchmarkBlackFriday-2   	     500	   3875623 ns/op	 3318457 B/op	   20052 allocs/op
BenchmarkBlackFriday-4   	     500	   3783871 ns/op	 3334775 B/op	   20056 allocs/op
BenchmarkBlackFriday-8   	     500	   3917515 ns/op	 3341045 B/op	   20058 allocs/op
```

Blackfriday æ²¡æœ‰å®ç° CommonMark æ‰€ä»¥æ€§èƒ½å¥½ä¸€äº›ã€‚

### [markdown-it](https://github.com/markdown-it/markdown-it)

markdown-it æ˜¯ JavaScript å†™çš„ï¼Œå®ƒåŒæ ·å®ç°äº† CommonMark è§„èŒƒã€‚å¾ªç¯æ¸²æŸ“ 300 æ¬¡ï¼Œå¹³å‡æ¯æ¬¡è°ƒç”¨è€—æ—¶ 9285933nsï¼ˆ9.2msï¼‰ï¼Œè€—æ—¶å¤§è‡´æ˜¯ golang å®ç°çš„ä¸¤å€ã€‚

## ğŸ“œ æ–‡æ¡£

TBD

* [ã€Šæé—®çš„æ™ºæ…§ã€‹ç²¾è¯»æ³¨è§£ç‰ˆ](https://hacpai.com/article/1536377163156)
* Lute ä½¿ç”¨æŒ‡å—
* CommonMark è§„èŒƒè¦ç‚¹è§£è¯»
* Lute å®ç°åè®°

ç›®å‰æ‰€æœ‰æ–‡æ¡£ï¼ˆåŒ…æ‹¬ä»£ç æ³¨é‡Šï¼‰éƒ½æ˜¯ä¸­æ–‡çš„ï¼Œæ¬¢è¿å¤–æ–‡å¥½çš„åŒå­¦å¸®å¿™è¿›è¡Œå›½é™…åŒ–ï¼Œä¸èƒœæ„Ÿæ¿€ï¼

## ğŸ˜ï¸ ç¤¾åŒº

* [è®¨è®ºåŒº](https://hacpai.com/tag/lute)
* [æŠ¥å‘Šé—®é¢˜](https://github.com/b3log/lute/issues/new/choose)

## ğŸ“„ æˆæƒ

Lute ä½¿ç”¨ [Apache License, Version 2](https://www.apache.org/licenses/LICENSE-2.0) å¼€æºåè®®ã€‚

## ğŸ™ é¸£è°¢

Lute çš„è¯ç”Ÿç¦»ä¸å¼€ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼Œåœ¨æ­¤å¯¹è¿™äº›é¡¹ç›®çš„è´¡çŒ®è€…ä»¬è‡´ä»¥æœ€å´‡é«˜çš„æ•¬æ„ï¼

* [commonmark.js](https://github.com/commonmark/commonmark.js)ï¼šè¯¥é¡¹ç›®æ˜¯ CommonMark å®˜æ–¹å‚è€ƒå®ç°çš„ JavaScript ç‰ˆï¼ŒLute å‚è€ƒäº†å…¶è§£æå™¨å®ç°éƒ¨åˆ†
* [mdast](https://github.com/syntax-tree/mdast)ï¼šè¯¥é¡¹ç›®ä»‹ç»äº†ä¸€ç§ Markdown æŠ½è±¡è¯­æ³•æ ‘ç»“æ„çš„è¡¨ç°å½¢å¼ï¼ŒLute çš„ AST åœ¨åˆå§‹è®¾è®¡é˜¶æ®µå‚è€ƒäº†è¯¥é¡¹ç›®
* [goldmark](https://github.com/yuin/goldmark)ï¼šå¦ä¸€æ¬¾ç”¨ golang å†™çš„ Markdown å¼•æ“ï¼ŒLute å‚è€ƒäº†å…¶æ ‘éå†å®ç°éƒ¨åˆ†
* [golang-commonmark](https://gitlab.com/golang-commonmark/markdown)ï¼šå¦ä¸€æ¬¾ç”¨ golang å†™çš„ Markdown å¼•æ“ï¼ŒLute å‚è€ƒäº†å…¶ URL ç¼–ç ç®—æ³•

---

## ğŸ‘ å¼€æºé¡¹ç›®æ¨è

* å¦‚æœä½ éœ€è¦é›†æˆä¸€ä¸ªæµè§ˆå™¨ç«¯çš„ Markdown ç¼–è¾‘å™¨ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ [Vditor](https://github.com/b3log/vditor)
* å¦‚æœä½ éœ€è¦æ­å»ºä¸€ä¸ªä¸ªäººåšå®¢ç³»ç»Ÿï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ [Solo](https://github.com/b3log/solo)
* å¦‚æœä½ éœ€è¦æ­å»ºä¸€ä¸ªç¤¾åŒºå¹³å°ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ [Sym](https://github.com/b3log/symphony)
* æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„å°ä¼—å¼€æºç¤¾åŒºï¼Œè¯¦æƒ…è¯·çœ‹[è¿™é‡Œ](https://hacpai.com/article/1463025124998)
