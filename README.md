# Lute

> åƒå‘¼ä¸‡å”¤å§‹å‡ºæ¥ï¼ŒçŠ¹æŠ±çµç¶åŠé®é¢ã€‚è½¬è½´æ‹¨å¼¦ä¸‰ä¸¤å£°ï¼Œæœªæˆæ›²è°ƒå…ˆæœ‰æƒ…ã€‚

## ğŸ’¡ ç®€ä»‹

[Lute](https://github.com/b3log/lute) æ˜¯ä¸€æ¬¾ç»“æ„åŒ–çš„ Markdown å¼•æ“ï¼Œå®Œæ•´å®ç°äº†æœ€æ–°çš„ [GFM](https://github.github.com/gfm/)/[CommonMark](https://commonmark.org) è§„èŒƒï¼Œå¯¹ä¸­æ–‡è¯­å¢ƒæ”¯æŒæ›´å¥½ã€‚

## ğŸ“½ï¸ èƒŒæ™¯

ä¹‹å‰æˆ‘ä¸€ç›´åœ¨ä½¿ç”¨å…¶ä»– Markdown å¼•æ“ï¼Œå®ƒä»¬æˆ–å¤šæˆ–å°‘éƒ½æœ‰äº›â€œç‘•ç–µâ€ï¼š

* å¯¹æ ‡å‡†è§„èŒƒçš„æ”¯æŒä¸ä¸€è‡´
* å¯¹â€œæ€ªå¼‚â€æ–‡æœ¬å¤„ç†éå¸¸è€—æ—¶ï¼Œç”šè‡³æŒ‚æ­»
* å¯¹ä¸­æ–‡æ”¯æŒä¸å¤Ÿå¥½

Lute çš„ç›®æ ‡æ˜¯æ„å»ºä¸€ä¸ªç»“æ„åŒ–çš„ Markdown å¼•æ“ï¼Œå®ç° GFM/CM è§„èŒƒå¹¶å¯¹ä¸­æ–‡æä¾›æ›´å¥½çš„æ”¯æŒã€‚æ‰€è°“çš„â€œç»“æ„åŒ–â€æŒ‡çš„æ˜¯ä»è¾“å…¥çš„ MD æ–‡æœ¬æ„å»ºæŠ½è±¡è¯­æ³•æ ‘ï¼Œé€šè¿‡æ“ä½œæ ‘æ¥è¿›è¡Œ HTML è¾“å‡ºã€åŸæ–‡æ ¼å¼åŒ–ç­‰ã€‚
å®ç°è§„èŒƒæ˜¯ä¸ºäº†ä¿è¯ Markdown æ¸²æŸ“ä¸å­˜åœ¨äºŒä¹‰æ€§ï¼Œè®©åŒä¸€ä»½ Markdown æ–‡æœ¬å¯ä»¥åœ¨å®ç°è§„èŒƒçš„ Markdown å¼•æ“å¤„ç†åå¾—åˆ°ä¸€æ ·çš„ç»“æœï¼Œè¿™ä¸€ç‚¹éå¸¸é‡è¦ã€‚

å®ç°è§„èŒƒçš„å¼•æ“å¹¶ä¸å¤šï¼Œæˆ‘æƒ³è¯•è¯•çœ‹è‡ªå·±èƒ½ä¸èƒ½å†™ä¸Šä¸€ä¸ªï¼Œè¿™ä¹Ÿæ˜¯ Lute çš„åŠ¨æœºä¹‹ä¸€ã€‚å…³äºå¦‚ä½•å®ç°ä¸€ä¸ª Markdown å¼•æ“ï¼Œç½‘ä¸Šä¼—è¯´çº·çº­ï¼š

* æœ‰çš„äººè¯´ Markdown é€‚åˆç”¨æ­£åˆ™è§£æï¼Œå› ä¸ºæ–‡æ³•è§„åˆ™å¤ªç®€å•
* ä¹Ÿæœ‰çš„äººè¯´ Markdown å¯ä»¥ç”¨ç¼–è¯‘åŸç†æ¥å¤„ç†ï¼Œæ­£åˆ™å¤ªéš¾ç»´æŠ¤

æˆ‘èµåŒåè€…ï¼Œå› ä¸ºæ­£åˆ™ç¡®å®å¤ªéš¾ç»´æŠ¤è€Œä¸”è¿è¡Œæ•ˆç‡è¾ƒä½ã€‚æœ€é‡è¦çš„åŸå› æ˜¯ç¬¦åˆ GFM/CM è§„èŒƒçš„ Markdown å¼•æ“çš„æ ¸å¿ƒè§£æç®—æ³•ä¸å¯èƒ½ç”¨æ­£åˆ™å†™å‡ºæ¥ï¼Œå› ä¸ºè§„èŒƒå®šä¹‰çš„è§„åˆ™å®åœ¨æ˜¯å¤ªå¤æ‚äº†ã€‚

æœ€åï¼Œè¿˜æœ‰ä¸€ä¸ªå¾ˆé‡è¦çš„åŠ¨æœºå°±æ˜¯ B3log å¼€æºç¤¾åŒºéœ€è¦ä¸€æ¬¾è‡ªå·±çš„ Markdown å¼•æ“ï¼š

* ç¤¾åŒºé¡¹ç›® [Solo](https://github.com/b3log/solo)ã€[Pipe](https://github.com/b3log/pipe)ã€[Sym](https://github.com/b3log/symphony) éœ€è¦æ•ˆæœç»Ÿä¸€çš„ Markdown æ¸²æŸ“ï¼Œå¹¶ä¸”æ€§èƒ½éå¸¸é‡è¦
* ç¤¾åŒºé¡¹ç›® [Vditor](https://github.com/b3log/vditor) éœ€è¦ä¸€æ¬¾ç»“æ„åŒ–çš„å¼•æ“ä½œä¸ºæ”¯æ’‘ä»¥å®ç°ä¸‹ä¸€ä»£çš„ Markdown ç¼–è¾‘å™¨

## âœ¨  ç‰¹æ€§

* å®ç°æœ€æ–°ç‰ˆ GFM/CM è§„èŒƒ
* éå¸¸å¿«
* ä»£ç å—è¯­æ³•é«˜äº®
* æ›´å¥½åœ°æ”¯æŒä¸­æ–‡è¯­å¢ƒ
* æ”¯æŒ Markdown æ ¼å¼åŒ–ï¼ˆå¾…å®ç°ï¼‰
* å¯æ‰©å±•è¯­æ³•æ ‘èŠ‚ç‚¹ï¼ˆå¾…å®ç°ï¼‰

## ğŸ—ƒ æ¡ˆä¾‹

* [é»‘å®¢æ´¾](https://hacpai.com)
* [Solo](https://solo.b3log.org)
* [Pipe](https://github.com/b3log/pipe)

## ğŸ‡¨ğŸ‡³ ä¸­æ–‡è¯­å¢ƒä¼˜åŒ–

* è‡ªåŠ¨é“¾æ¥è¯†åˆ«åŠ å¼º
* åœ¨ä¸­è¥¿æ–‡é—´è‡ªåŠ¨æ’å…¥ç©ºæ ¼

## âš¡ æ€§èƒ½

åœ¨ç›¸åŒæœºå™¨ä¸Šï¼Œç”¨ç›¸åŒçš„æµ‹è¯•æ•°æ®ï¼ˆ[CommonMark è§„èŒƒæ–‡æ¡£](https://github.com/commonmark/commonmark-spec-web/blob/gh-pages/0.29/spec.txt) ~197Kï¼‰è·‘åŸºå‡†æµ‹è¯•ç»“æœå¦‚ä¸‹ã€‚  
ç›®å‰çœ‹æ¥åœ¨å®ç° CommonMark è§„èŒƒçš„å‰æä¸‹ï¼ŒLuteã€goldmark å’Œ golang-commonmark çš„æ€§èƒ½å·®è·ä¸å¤§ï¼ŒBlackfriday æ²¡æœ‰å®ç° CommonMark æ‰€ä»¥æ€§èƒ½æ›´å¥½ä¸€äº›ã€‚

### [Lute](https://github.com/b3log/lute)

```
BenchmarkLute-2   	     300	   5199424 ns/op	 2951987 B/op	   22567 allocs/op
BenchmarkLute-4   	     300	   4963289 ns/op	 2952282 B/op	   22567 allocs/op
BenchmarkLute-8   	     300	   5039851 ns/op	 2952783 B/op	   22568 allocs/op
```

### [goldmark](https://github.com/yuin/goldmark)

```
BenchmarkGoldMark-2   	     300	   4757269 ns/op	 2110741 B/op	   13901 allocs/op
BenchmarkGoldMark-4   	     300	   4790514 ns/op	 2113679 B/op	   13902 allocs/op
BenchmarkGoldMark-8   	     300	   4860327 ns/op	 2114696 B/op	   13902 allocs/op
```

### [golang-commonmark](https://gitlab.com/golang-commonmark/markdown)

```
BenchmarkGolangCommonMark-2   	     300	   5099691 ns/op	 2973258 B/op	   18827 allocs/op
BenchmarkGolangCommonMark-4   	     300	   5083059 ns/op	 2973794 B/op	   18828 allocs/op
BenchmarkGolangCommonMark-8   	     300	   5103111 ns/op	 2974818 B/op	   18828 allocs/op
```

### [Blackfriday](https://github.com/russross/blackfriday)

```
BenchmarkBlackFriday-2   	     500	   3875623 ns/op	 3318457 B/op	   20052 allocs/op
BenchmarkBlackFriday-4   	     500	   3783871 ns/op	 3334775 B/op	   20056 allocs/op
BenchmarkBlackFriday-8   	     500	   3917515 ns/op	 3341045 B/op	   20058 allocs/op
```

### [markdown-it](https://github.com/markdown-it/markdown-it)

markdown-it æ˜¯ JavaScript å†™çš„ï¼Œå®ƒåŒæ ·å®ç°äº† CommonMark è§„èŒƒã€‚å¾ªç¯æ¸²æŸ“ 300 æ¬¡ï¼Œå¹³å‡æ¯æ¬¡è°ƒç”¨è€—æ—¶ 9285933nsï¼ˆ9.2msï¼‰ï¼Œè€—æ—¶å¤§è‡´æ˜¯ golang å®ç°çš„ä¸¤å€ã€‚

## ğŸ’ª å¥å£®æ€§

Lute æ‰¿è½½äº†[é»‘å®¢æ´¾](https://hacpai.com)ä¸Šçš„æ‰€æœ‰ Markdown å¤„ç†ï¼Œæ¯å¤©å¤„ç†æ•°åä¸‡è¯·æ±‚ï¼Œè¿è¡Œè¡¨ç°ç¨³å®šã€‚

## ğŸ”’ å®‰å…¨

Lute æ²¡æœ‰å®ç°å®ç° GFM ä¸­çš„ [Disallowed Raw HTML (extension)](https://github.github.com/gfm/#disallowed-raw-html-extension-)ï¼Œå› ä¸ºè¯¥æ‰©å±•è¿˜æ˜¯å­˜åœ¨ä¸€å®šæ¼æ´ï¼ˆæ¯”å¦‚æ²¡æœ‰å¤„ç† `<input>`ï¼‰ã€‚
å»ºè®®é€šè¿‡å…¶ä»–åº“ï¼ˆæ¯”å¦‚ [bluemonday](https://github.com/microcosm-cc/bluemonday)ï¼‰æ¥è¿›è¡Œ HTML å®‰å…¨è¿‡æ»¤ï¼Œè¿™æ ·ä¹Ÿèƒ½æ›´å¥½åœ°é€‚é…åº”ç”¨åœºæ™¯ã€‚

## ğŸ“œ æ–‡æ¡£

* [ã€Šæé—®çš„æ™ºæ…§ã€‹ç²¾è¯»æ³¨è§£ç‰ˆ](https://hacpai.com/article/1536377163156)
* Lute ä½¿ç”¨æŒ‡å—
* CommonMark è§„èŒƒè¦ç‚¹è§£è¯»

ç›®å‰å¤§éƒ¨åˆ†æ–‡æ¡£éƒ½æ˜¯ä¸­æ–‡çš„ï¼Œæ¬¢è¿å¤–æ–‡å¥½çš„åŒå­¦å¸®å¿™è¿›è¡Œå›½é™…åŒ–ã€‚

## ğŸ˜ï¸ ç¤¾åŒº

* [è®¨è®ºåŒº](https://hacpai.com/tag/lute)
* [æŠ¥å‘Šé—®é¢˜](https://github.com/b3log/lute/issues/new/choose)

## ğŸ“„ æˆæƒ

Lute ä½¿ç”¨ [Apache License, Version 2](https://www.apache.org/licenses/LICENSE-2.0) å¼€æºåè®®ã€‚

## ğŸ™ é¸£è°¢

Lute çš„è¯ç”Ÿç¦»ä¸å¼€ä»¥ä¸‹å¼€æºé¡¹ç›®ï¼Œåœ¨æ­¤å¯¹è¿™äº›é¡¹ç›®çš„è´¡çŒ®è€…ä»¬è‡´ä»¥æœ€å´‡é«˜çš„æ•¬æ„ï¼

* [commonmark.js](https://github.com/commonmark/commonmark.js)ï¼šè¯¥é¡¹ç›®æ˜¯ CommonMark å®˜æ–¹å‚è€ƒå®ç°çš„ JavaScript ç‰ˆï¼ŒLute å‚è€ƒäº†å…¶è§£æå™¨å®ç°éƒ¨åˆ†
* [mdast](https://github.com/syntax-tree/mdast)ï¼šè¯¥é¡¹ç›®ä»‹ç»äº†ä¸€ç§ Markdown æŠ½è±¡è¯­æ³•æ ‘ç»“æ„çš„è¡¨ç°å½¢å¼ï¼ŒLute çš„ AST åœ¨åˆå§‹è®¾è®¡é˜¶æ®µå‚è€ƒäº†è¯¥é¡¹ç›®
* [goldmark](https://github.com/yuin/goldmark)ï¼šå¦ä¸€æ¬¾ç”¨ golang å†™çš„ Markdown å¼•æ“ï¼ŒLute å‚è€ƒäº†å…¶æ ‘éå†å®ç°éƒ¨åˆ†
* [golang-commonmark](https://gitlab.com/golang-commonmark/markdown)ï¼šå¦ä¸€æ¬¾ç”¨ golang å†™çš„ Markdown å¼•æ“ï¼ŒLute å‚è€ƒäº†å…¶ URL ç¼–ç ç®—æ³•
* [Chroma](https://github.com/alecthomas/chroma)ï¼šç”¨ golang å†™çš„è¯­æ³•é«˜äº®å¼•æ“
* [fasthttp](https://github.com/valyala/fasthttp)ï¼šç”¨ golang å†™çš„é«˜æ€§èƒ½ HTTP å®ç°
* [ä¸­æ–‡æ–‡æ¡ˆæ’ç‰ˆæŒ‡åŒ—](https://github.com/sparanoid/chinese-copywriting-guidelines)ï¼šç»Ÿä¸€ä¸­æ–‡æ–‡æ¡ˆã€æ’ç‰ˆçš„ç›¸å…³ç”¨æ³•ï¼Œé™ä½å›¢é˜Ÿæˆå‘˜ä¹‹é—´çš„æ²Ÿé€šæˆæœ¬ï¼Œå¢å¼ºç½‘ç«™æ°”è´¨
* [autocorrect](https://github.com/studygolang/autocorrect)ï¼šè‡ªåŠ¨ç»™ä¸­è‹±æ–‡ä¹‹é—´åŠ å…¥ç©ºæ ¼

---

## ğŸ‘ å¼€æºé¡¹ç›®æ¨è

* å¦‚æœä½ éœ€è¦é›†æˆä¸€ä¸ªæµè§ˆå™¨ç«¯çš„ Markdown ç¼–è¾‘å™¨ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ [Vditor](https://github.com/b3log/vditor)
* å¦‚æœä½ éœ€è¦æ­å»ºä¸€ä¸ªä¸ªäººåšå®¢ç³»ç»Ÿï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ [Solo](https://github.com/b3log/solo)
* å¦‚æœä½ éœ€è¦æ­å»ºä¸€ä¸ªç¤¾åŒºå¹³å°ï¼Œå¯ä»¥è€ƒè™‘ä½¿ç”¨ [Sym](https://github.com/b3log/symphony)
* æ¬¢è¿åŠ å…¥æˆ‘ä»¬çš„å°ä¼—å¼€æºç¤¾åŒºï¼Œè¯¦æƒ…è¯·çœ‹[è¿™é‡Œ](https://hacpai.com/article/1463025124998)
